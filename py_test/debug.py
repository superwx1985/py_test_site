import base64
import json
import os
import sys
# from urllib3.util import Retry, Timeout
# from selenium import webdriver
# from selenium.webdriver.common.proxy import Proxy
# from selenium.webdriver.common.proxy import ProxyType
# from selenium.webdriver.remote.client_config import ClientConfig
#
#
# def test_start_remote_ignore_certs(grid_server):
#     proxy = Proxy({"proxyType": ProxyType.AUTODETECT})
#     client_config = ClientConfig(remote_server_addr=grid_server,
#                                  timeout=3600,
#                                  ignore_certificates=True,)
#     options = webdriver.ChromeOptions()
#     driver = webdriver.Remote(command_executor=grid_server, options=options, client_config=client_config)
#     driver.get("https://www.selenium.dev")
#     driver.quit()
#
#
#
# test_start_remote_ignore_certs("10.100.1.234:4444")


def decode_jwt_func(str_: str) -> (dict, dict):
    header_encoded, payload_encoded, signature = str_.split('.')

    # 解码 Base64 URL 编码的字符串
    def decode_base64_url(data):
        # Base64 URL 编码需要补齐等号
        padding = "=" * ((4 - len(data) % 4) % 4)
        decoded_bytes = base64.urlsafe_b64decode(data + padding)
        return decoded_bytes.decode("utf-8")

    header = decode_base64_url(header_encoded)
    payload = decode_base64_url(payload_encoded)
    return header, payload


print(decode_jwt_func("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"))
print(decode_jwt_func("eyJhbGciOiJSUzI1NiIsImtpZCI6IjRCOTFBM0ZGM0IxOEYxQTIzOTc4MzY0OUJCMUFFNkJCMkUxQzFBNTVSUzI1NiIsInR5cCI6ImF0K2p3dCIsIng1dCI6IlM1R2pfenNZOGFJNWVEWkp1eHJtdXk0Y0dsVSJ9.eyJuYmYiOjE3MzE1NjI0MjQsImV4cCI6MTczMTU2OTYyNCwiaXNzIjoiaHR0cHM6Ly9ndWMuZXUuZ2xvYmUtZ3JvdXBzLmNvbSIsImF1ZCI6WyJFcnJvclNlcnZpY2VBcGkiLCJnQ29ubmVjdEFwcEFwaSIsImdDb25uZWN0SW9URGV2aWNlIiwiZ0Nvbm5lY3RPcGVuQXBpIiwiTGljZW5zZVNlcnZpY2VBcGkiLCJHdWNBcGkiXSwiY2xpZW50X2lkIjoiQ3JhbWVyQ29ubmVjdEFpQ29uaWMiLCJzdWIiOiI2MDc3ZTdhMS1hYTk5LTRlYmItOTAxZC1mZjgxYWE0ZDNmYjAiLCJhdXRoX3RpbWUiOjE3MzE1NjI0MjQsImlkcCI6ImxvY2FsIiwiQWNjZXNzaWJsZUFwcGxpY2F0aW9uIjoiQ3JhbWVyQ29ubmVjdEFpQ29uaWMiLCJUZW5hbnQiOiJHTEIiLCJCYXNlTG9jYXRpb24iOiJTV0UiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiWGxpbmtVc2VyXzUzZGE3Mjc3N2Q5NjQ0ZjQ4ZTRjMjQ5MmEwZTEwYTk4IiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvZW1haWxhZGRyZXNzIjoidmljLndhbmdAZ2xvYmV0b29scy5jb20iLCJJc0VtYWlsQ29uZmlybWVkIjp0cnVlLCJQYXNzd29yZEhhc2giOiJBUUFBQUFFQUFDY1FBQUFBRURtalFHSGZwMHEzVmZBQ1RrRDBnb09wc3dVRytFamc3VmZQVDlwZ2xySHpGY1ZOR2owMWxqZEtrS2dBMkVBYUhRPT0iLCJqdGkiOiI3NTg0MkM2NTY0ODNFOEE0QzUwQjk1NkREMEYyMzlBMSIsImlhdCI6MTczMTU2MjQyNCwic2NvcGUiOiJFcnJvclNlcnZpY2VBcGkgZ0Nvbm5lY3RBcHBBcGkuQVBQUHVzaC5SZWFkIGdDb25uZWN0QXBwQXBpLkFQUFB1c2guV3JpdGUgZ0Nvbm5lY3RBcHBBcGkuQXNzb2NpYXRlZERldmljZS5Xcml0ZSBnQ29ubmVjdEFwcEFwaS5EYXRhUG9pbnQuUmVhZCBnQ29ubmVjdEFwcEFwaS5EZXZpY2VSZWdpc3RyYXRpb24uUmVhZCBnQ29ubmVjdEFwcEFwaS5GaXJtd2FyZVVwZ3JhZGUuUmVhZCBnQ29ubmVjdEFwcEFwaS5GaXJtd2FyZVVwZ3JhZGUuV3JpdGUgZ0Nvbm5lY3RBcHBBcGkuTXVsdGlab25lLlJlYWQgZ0Nvbm5lY3RBcHBBcGkuTXVsdGlab25lLldyaXRlIGdDb25uZWN0QXBwQXBpLlBhaXJpbmcuUmVhZCBnQ29ubmVjdEFwcEFwaS5QYWlyaW5nLldyaXRlIGdDb25uZWN0SW90RGV2aWNlLkRldmljZS5SZWFkIGdDb25uZWN0SW90RGV2aWNlLkRldmljZS5Xcml0ZSBnQ29ubmVjdElvdERldmljZS5EZXZpY2VFeHRlbnNpb24uUmVhZCBnQ29ubmVjdElvdERldmljZS5EZXZpY2VFeHRlbnNpb24uV3JpdGUgZ0Nvbm5lY3RJb3REZXZpY2UuRGV2aWNlU2hhcmUuUmVhZCBnQ29ubmVjdElvdERldmljZS5EZXZpY2VTaGFyZS5Xcml0ZSBnQ29ubmVjdElvdERldmljZS5STE0uUmVhZCBnQ29ubmVjdElvdERldmljZS5STE0uV3JpdGUgZ0Nvbm5lY3RJb3REZXZpY2UuVXNlckV4dGVuc2lvbi5SZWFkIGdDb25uZWN0SW90RGV2aWNlLlVzZXJFeHRlbnNpb24uV3JpdGUgZ0Nvbm5lY3RPcGVuQXBpIExpY2Vuc2VTZXJ2aWNlQXBpIG9wZW5pZCBwcm9maWxlIHVzZXIuYmFzaWMgb2ZmbGluZV9hY2Nlc3MiLCJhbXIiOlsicHdkIl19.IZMEkTSKFZ0LXX_kvdHRCl44yjSSdqHPhopvOI54YOQtQ5tpt5SCdvt1ghgv7dpdnK8QjcmJfADoTF_O8qpOkntD5QhNOzEUXoIzRIf_KitkZiApmR5mtOiUfaPlvVnH8tY5N1hfiRnE_4ZZvzliRI-_sczU3IWlaHGzbHmQ9LLpOB4zu614tPqTtJCfg7Hf3A4zaDF8kAFQL9jvHRAENqx_ZauYrPNiVGPtr-QLvBuCE0y0Bu2hz5FQ-byh46Wi_kjGtx1T-uJ68iWxHN3O0Qe6ny-VWGtOXNdcBHnx8Q8ymWaxk_YpVq9xvp31ypS3ozJesoJM5FrIR36pqA7rdQ"))
print(decode_jwt_func("eyJhbGciOiJSUzI1NiIsImtpZCI6IjRCOTFBM0ZGM0IxOEYxQTIzOTc4MzY0OUJCMUFFNkJCMkUxQzFBNTVSUzI1NiIsInR5cCI6ImF0K2p3dCIsIng1dCI6IlM1R2pfenNZOGFJNWVEWkp1eHJtdXk0Y0dsVSJ9.eyJuYmYiOjE3MzE1NzIyMjUsImV4cCI6MTczMTU3OTQyNSwiaXNzIjoiaHR0cHM6Ly9ndWMuZXUuZ2xvYmUtZ3JvdXBzLmNvbSIsImF1ZCI6WyJnQ29ubmVjdElvVERldmljZSIsIkd1Y0FwaSJdLCJjbGllbnRfaWQiOiJnQ29ubmVjdFdlYiIsInN1YiI6IjYzNzhmNWZjLTA5MmItNGQzYS1hMzBjLTMyMjBkNzRlYTUxMCIsImF1dGhfdGltZSI6MTczMTU3MjIyMiwiaWRwIjoibG9jYWwiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJMb2NhbCBBZG1pbiIsIkFjY2Vzc2libGVBcHBsaWNhdGlvbiI6ImdDb25uZWN0V2ViIiwiVGVuYW50IjoiR0xCIiwiQmFzZUxvY2F0aW9uIjoiQ0hOIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZSI6IlZpY1dhbmciLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ2aWMud2FuZ0BnbG9iZXRvb2xzLmNvbSIsIkZ1bGxOYW1lIjoiVmljV2FuZyIsIklzRW1haWxDb25maXJtZWQiOnRydWUsIlBhc3N3b3JkSGFzaCI6IkFRQUFBQUVBQUNjUUFBQUFFSkhLQitsVTI4RVBjNExCOEsxMHcwL2N5dU9ZRGVQNzVDTGJTRlZzMlRWM2JjOXZVUjNYR1o5KzdZZVlhTjE5SkE9PSIsImp0aSI6IjlDMDhFRjk1MjhFQzI1OTM1QzZBMjM4QTBBQkUxNTAxIiwic2lkIjoiRUVDNDJFNEM1NDg3NDIzQjhFQjI3NTFBMjU5MDMxMEUiLCJpYXQiOjE3MzE1NzIyMjUsInNjb3BlIjoiZ0Nvbm5lY3RJb3REZXZpY2UuR1VDQXBpLldyaXRlIGdDb25uZWN0SW90RGV2aWNlLkdVQ0FwaS5SZWFkIGdDb25uZWN0SW90RGV2aWNlLm9mZmxpbmVNZXNzYWdlLldyaXRlIGdDb25uZWN0SW90RGV2aWNlLnRlc3RNb2RlbC5Xcml0ZSBnQ29ubmVjdElvdERldmljZS50ZXN0TW9kZWwuUmVhZCBnQ29ubmVjdElvdERldmljZS5EZXZpY2UuV3JpdGUgZ0Nvbm5lY3RJb3REZXZpY2UuRGV2aWNlLlJlYWQgZ0Nvbm5lY3RJb3REZXZpY2UuRGV2aWNlRXh0ZW5zaW9uLldyaXRlIGdDb25uZWN0SW90RGV2aWNlLkRldmljZUV4dGVuc2lvbi5SZWFkIGdDb25uZWN0SW90RGV2aWNlLlJMTS5Xcml0ZSBnQ29ubmVjdElvdERldmljZS5STE0uUmVhZCBnQ29ubmVjdElvdERldmljZS5Vc2VyRXh0ZW5zaW9uLldyaXRlIGdDb25uZWN0SW90RGV2aWNlLlVzZXJFeHRlbnNpb24uUmVhZCB1c2VyLmJhc2ljIiwiYW1yIjpbInB3ZCJdfQ.aoTmHjmQag3fL4i6wViy5Frd3f3x7fiVPxnz8g_V-kPEN3fcMG6o0HHrU-SmExaFEl2Ls82rYzHg8B2zK7nJQLKBX1IpwN-xojdeDZpDCowuhCK88p_XNsiK4Jcrr75hg7aftN7IXkZsXzsOK8lotf4aMxiOCwBvP-aA6j4pb5H1YPvQ4pK9_Lu2oYm07FSWH1-aqZdFx2Tz1Y5RhoNh3XMeh9irR6RhZ9LWTRjnaxxYBWlyy_9Exdtv3lspVCaJP-z1dmOSr1oODN_Wt8rnfLm7HG8FLbpOEgNaC993s0L0yWFxCRx22fh8oKi84MuGkT4TsGE1YOHQ9anzfy9YSg"))
