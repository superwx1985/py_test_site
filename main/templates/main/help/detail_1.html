{% load staticfiles %}
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        {% include 'main/include/general_css.html' %}
        <style type='text/css' media='screen'>
            div.row {
                padding: 5px 0;
                {#min-height: 2em;#}
            }
        </style>
        {% include 'main/include/general_script.html' %}

        <script>
            $(function () {
                // 更新导航栏
                $('#nav_help').addClass('active');
                // 注册注销按钮
                $("#logout_btn").click(function () {
                    window.open('{% url 'user_logout' %}', '_self');
                });
            });
        </script>
    </head>
    <body>
        {% include 'main/include/navbar.html' %}
        <div class="container-fluid" style="padding-top: 60px; padding-bottom: 200px">
            <div class="container">
                <h2 class="text-center">变量讲解</h2>
                <p>变量在测试数据中使用<span class="mark">${}$</span>标识，用于指代一些动态变化的内容。</p>
                <h3>普通变量</h3>
                <p>在测试套件的公共变量组或测试用例的用例变量组中寻找变量，支持嵌套。</p>
                <div>
                    <span>假设已有变量组</span>
                    <table class="table table-bordered table-sm">
                        <thead class="thead-light">
                            <tr><th>Name</th><th>Value</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>name</td><td>abc</td></tr>
                            <tr><td>url</td><td>http://127.0.0.1/testpage.html</td></tr>
                            <tr><td>param</td><td>?returnUrl=${name}$</td></tr>
                        </tbody>
                    </table>
                </div>
                <p>
                    <span>那么</span>
                    <br>
                    <code>${name}$</code><span>替换为</span><code>abc</code>
                    <br>
                    <code>${url}$?returnUrl=${name}$</code><span>替换为</span><code>http://127.0.0.1/testpage.html?returnUrl=abc</code>
                    <br>
                    <code>${url}$${param}$</code><span>替换为（变量嵌套，先替换最里层的）</span><code>http://127.0.0.1/testpage.html?returnUrl=abc</code>
                </p>
                <h3>特殊变量</h3>
                <p>用于生成一些特殊的值。格式为在<span class="mark">${}$</span>内包含一个竖线，如<span class="mark">${r|1,,100}$</span>，竖线前为操作符部分，竖线后为参数部分，参数部分可用逗号分隔为多个参数。竖线、逗号等分隔符两侧请勿加入空格，否则空格会视为操作符或参数的一部分。</p>
                <h4>操作符</h4>
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" href="#operate_1">r</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#operate_2">t</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#operate_3">ts</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#operate_4">tst</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#operate_5">url</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#operate_6">uuid</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#operate_7">slice</a>
                    </li>
                </ul>
                <div class="tab-content bg-light">
                    <div id="operate_1" class="tab-pane active" style="padding: 1em">
                        <div>
                            <p class="lead">生成随机数，接收1到3个参数。</p>
                            <p class="font-weight-bold">参数1</p>
                            <p>代表随机数范围是从0到参数1的值。</p>
                            <p>例：<span class="mark">${r|100}$</span>，代表生成一个0-100的随机数。</p>
                            <p class="font-weight-bold">参数2</p>
                            <p>如提供2个参数，则参数1代表随机数范围起始值，参数2代表随机数范围结束值。</p>
                            <p>例：<span class="mark">${r|50,100}$</span>，代表生成一个50-100的随机数。</p>
                            <p class="font-weight-bold">参数3</p>
                            <p>如提供3个参数，则参数1代表随机数范围起始值，参数2代表随机数范围结束值，参数3代表保留几位小数。</p>
                            <p>例：<span class="mark">${r|50,100,2}$</span>，代表生成一个0-100的随机数，保留2位小数。</p>
                        </div>
                    </div>
                    <div id="operate_2" class="tab-pane" style="padding: 1em">
                        <div>
                            <p class="lead">生成时间字符串，接收1，2或4个参数。</p>
                            <p class="font-weight-bold">参数1</p>
                            <p>代表一个日期，返回一个标准时间字符串。</p>
                            <p>例：
                                <br>
                                <span class="mark">${t|1985-10-1}$</span>，返回<span class="text-info">1985-10-01 00:00:00</span>
                                <br>
                                <span class="mark">${t|2007-7-12 13:00:04}$</span>，返回<span class="text-info">2007-07-12 13:00:04</span>
                                <br>
                                <span class="mark">${t|now}$</span>，返回当前系统时间。
                            </p>
                            <p class="font-weight-bold">参数2</p>
                            <p>代表输出的时间格式，时间格式为python datetime对象strftime方法支持的格式，也可以使用快捷格式（见下表）。注意：时间格式不能包含逗号。</p>
                            <table class="table table-bordered table-sm">
                                <thead class="thead-light">
                                    <tr><th>快捷格式</th><th>实际格式</th></tr>
                                </thead>
                                <tbody>
                                    <tr><td>（默认，不填格式的情况）</td><td>%Y-%m-%d %H:%M:%S</td></tr>
                                    <tr><td>date</td><td>%Y-%m-%d</td></tr>
                                    <tr><td>full</td><td>%Y-%m-%d %H:%M:%S.%f</td></tr>
                                    <tr><td>without_separator或ws</td><td>%Y%m%d%H%M%S</td></tr>
                                    <tr><td>date_without_separator或dws</td><td>%Y%m%d</td></tr>
                                    <tr><td>full_without_separator或fws</td><td>%Y%m%d%H%M%S%f</td></tr>
                                    <tr><td>year或Y</td><td>%Y</td></tr>
                                    <tr><td>month或m</td><td>%m</td></tr>
                                    <tr><td>day或d</td><td>%d</td></tr>
                                    <tr><td>hour或H</td><td>%H</td></tr>
                                    <tr><td>minute或M</td><td>%M</td></tr>
                                    <tr><td>second或S</td><td>%S</td></tr>
                                    <tr><td>microsecond或ms或f</td><td>%f</td></tr>
                                    <tr><td>week或W</td><td>%W</td></tr>
                                    <tr><td>week_day或wd或w</td><td>%w</td></tr>
                                    <tr><td>year_day或yd或j</td><td>%j</td></tr>
                                </tbody>
                            </table>
                            <p>例：
                                <br>
                                <span class="mark">${t|1985-10-1 10:20:31.123456,%Y-%m-%d}$</span>，返回<span class="text-info">1985-10-01</span>
                                <br>
                                <span class="mark">${t|1985-10-1 10:20:31.123456,%Y-%m-%d %H:%M:%S.%f}$</span>，返回<span class="text-info">1985-10-01 10:20:31.123456</span>
                                <br>
                                <span class="mark">${t|1985-10-1 10:20:31.123456,full}$</span>，返回<span class="text-info">1985-10-01 10:20:31.123456</span>
                            </p>
                            <p class="font-weight-bold">参数3及参数4</p>
                            <p>参数3代表时间位移单位，参数4代表时间位移量。注意：参数3和参数4需要成对出现，若只提供3个参数，程序不会对参数3作处理。</p>
                            <p>例：<span class="mark">${t|now,,day,-1}$</span>，返回<span class="text-info">2017-11-16 17:01:37</span></p>
                        </div>
                    </div>
                    <div id="operate_3" class="tab-pane" style="padding: 1em">
                        <div>
                            <p class="lead">通过日期字符串生成时间戳字符串，接收1到3个参数。注意：python的时间戳默认为秒后带小数点。</p>
                            <p class="font-weight-bold">参数1</p>
                            <p>代表一个日期，返回精确到毫秒的时间戳。</p>
                            <p>例：
                                <br>
                                <span class="mark">${ts|now}$</span>，返回<span class="text-info">1510911041.449</span>
                                <br>
                                <span class="mark">${ts|2010-1-1 13:00:16.003}$</span>，返回<span class="text-info">1262322016.003</span>
                                <br>
                                <span class="mark">${ts|1970-01-01 8:00:00}$</span>，返回<span class="text-info">0.000</span>
                            </p>
                            <p class="font-weight-bold">参数2</p>
                            <p>代表时间戳保留的小数位。</p>
                            <p>例：
                                <br>
                                <span class="mark">${ts|2010-1-1 13:00:16.763238,4}$</span>，返回<span class="text-info">1262322016.7632</span>
                                <br>
                                <span class="mark">${ts|1970-01-01 8:00:01.125,1}$</span>，返回<span class="text-info">1.1</span>
                            </p>
                            <p class="font-weight-bold">参数3</p>
                            <p>代表去掉小数点（参数3的值可任意填）。</p>
                            <p>例：
                                <br>
                                <span class="mark">${ts|2010-1-1 13:00:16.763238,4,abc}$</span>，返回<span class="text-info">12623220167632</span>
                                <br>
                                <span class="mark">${ts|1970-01-01 8:00:01.125,1,}$</span>，返回<span class="text-info">11</span>
                            </p>
                        </div>
                    </div>
                    <div id="operate_4" class="tab-pane" style="padding: 1em">
                        <div>
                            <p class="lead">通过时间戳字符串生成日期字符串，接收1或2个参数。</p>
                            <p class="font-weight-bold">参数1</p>
                            <p>代表一个时间戳，返回默认格式的时间字符串。</p>
                            <p>例：<span class="mark">${tst|1262322016.7632}$</span>，返回<span class="text-info">2010-01-01 13:00:16.763200</span></p>
                            <p class="font-weight-bold">参数2</p>
                            <p>代表一个时间格式，返回指定格式的时间字符串。时间格式参见操作符t的参数2。</p>
                            <p>例：<span class="mark">${tst|1262322016.7632,%S.%f}$</span>，返回<span class="text-info">16.763200</span></p>
                        </div>
                    </div>
                    <div id="operate_5" class="tab-pane" style="padding: 1em">
                        <div>
                            <p class="lead">把字符串通过url编码后返回，接收1个参数。</p>
                            <p class="font-weight-bold">参数1</p>
                            <p>参数1为需要转换的内容。</p>
                            <p>例：<span class="mark">${url|index.html?a=测试}$</span>，返回<span class="text-info">index.html%3Fa%3D%E6%B5%8B%E8%AF%95</span></p>
                        </div>
                    </div>
                    <div id="operate_6" class="tab-pane" style="padding: 1em">
                        <div>
                            <p class="lead">返回一个长度为32位的UUID。不需要参数</p>
                            <p>例：<span class="mark">${uuid|}$</span>，返回<span class="text-info">f5138eec-9c83-11e8-823e-005056b214a1</span>。</p>
                        </div>
                    </div>
                    <div id="operate_7" class="tab-pane" style="padding: 1em">
                        <div>
                            <p class="lead">分割字符串</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
