{% extends 'main/list_base.html' %}
{% block title %}步骤 - {{ block.super }}{% endblock %}
{% block script %}
    <script>
        $(function () {
            // 更新导航栏
            $('#nav_step').addClass('active');
            // 注册快速更新事件
            var tds = $('#result_table tbody td[quick_update]');
            quick_update(tds, update_single_column, refresh_single_column);
            // 注册添加按钮
            $('#add_button').on('click', function () {
                window.open('{% url "step_add" %}');
            });
            // 注册删除按钮
            bind_delete_button();
        })
    </script>
{% endblock %}
{% block result_table %}
    <div class="table-responsive" id='result_table'>
        <table class="table table-striped table-bordered table-hover">
            <colgroup>
                <col style='width: 80px;'>
                <col style='width: 80px;'>
                <col>
                <col style='width: 200px;'>
                <col style='width: 150px;'>
            </colgroup>
            <thead class="thead-light">
                <tr>
                    <th>操作</th>
                    <th>ID</th>
                    <th>名称</th>
                    <th>关键字</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for object in objects %}
                    <tr pk="{{ object.pk }}" updateUrl="{% url 'step_update' object.pk %}" delUrl="{% url 'step_delete' object.pk %}">
                        <td>
                            <div class="mx-auto text-center">
                                <button type="button" id="delete_button" name="delete_button" class="btn btn-danger">删除</button>
                            </div>
                        </td>
                        <td col_name='id'><a target="_blank" href="{% url 'step' object.pk %}" class="font-weight-bold">{{ object.pk }}</a></td>
                        <td quick_update col_name='name'>{{ object.name }}</td>
                        <td quick_update col_name='keyword'>{{ object.keyword }}</td>
                        <td col_name='action'>{{ object.action }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="5" class="text-center">查无数据</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}