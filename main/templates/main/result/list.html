{% extends 'main/list_base.html' %}
{% block title %}结果 - {{ block.super }}{% endblock %}
{% block script %}
    <script>
        $(function () {
            // 更新导航栏
            $('#nav_result').addClass('active');

        })
    </script>
{% endblock %}
{% block tools_bar %}
    {% include 'main/include/tools_bar.html' %}
{% endblock %}
{% block result_table %}
    <div class="table-responsive" id='result_table'>
        <table class="table table-bordered table-hover">
            <colgroup>
                <col style='width: 80px;'>
                <col style='width: 80px;'>
                <col>
                <col style='width: 200px;'>
                <col style='width: 150px;'>
                <col style='width: 200px;'>
                <col style='width: 80px;'>
                <col style='width: 80px;'>
                <col style='width: 120px;'>
            </colgroup>
            <thead class="thead-light middle">
                <tr>
                    <th>序号</th>
                    <th order_by_text="pk">ID</th>
                    <th order_by_text="name">名称</th>
                    <th order_by_text="keyword">关键字</th>
                    <th order_by_text="project__name">项目</th>
                    <th order_by_text="start_date">测试时间</th>
                    <th order_by_text="result_status_str">结果</th>
                    <th order_by_text="creator__username">测试人</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {% for obj in objects %}
                    <tr pk="{{ obj.pk }}" edit_url="{% url 'result' obj.pk %}" quick_update_url="{% url 'result_quick_update' obj.pk %}" del_url="{% url 'result_delete' obj.pk %}">
                        <td col_name='index' class="middle"></td>
                        <td col_name='id' class="middle">{{ obj.pk }}</td>
                        <td {% if request.user.pk == obj.creator %}quick_update{% endif %} col_name='name' class="align-middle">{{ obj.name }}</td>
                        <td {% if request.user.pk == obj.creator %}quick_update{% endif %} col_name='keyword' class="align-middle">{{ obj.keyword }}</td>
                        <td col_name='project__name' class="middle">{{ obj.project__name }}</td>
                        <td col_name='start_date' class="middle">{{ obj.start_date }}</td>
                        {% if obj.result_status == 1 %}
                            <td class="middle"><span class="badge badge-pill badge-success">{{ obj.result_status_str }}</span></td>
                        {% elif obj.result_status == 2 %}
                            <td class="middle"><span class="badge badge-pill badge-warning">{{ obj.result_status_str }}</span></td>
                        {% else %}
                            <td class="middle"><span class="badge badge-pill badge-danger">{{ obj.result_status_str }}</span></td>
                        {% endif %}
                        <td col_name='creator__username' class="middle">{{ obj.creator__username }}</td>
                        <td>
                            <div class="middle">
                                <button type="button" name="edit_button" class="btn btn-info list_button" data-toggle="tooltip" title="查看详情"><i class="icon-bar-chart"></i></button>
                                <button type="button" name="delete_button" class="btn btn-danger list_button" data-toggle="tooltip" title="删除"><i class="icon-trash"></i></button>
                            </div>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="6" class="text-center bg-secondary">无数据</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}